!function(t,e){"use strict";var n={_events:{},createEvent:function(e){var n;return t.createEvent?(n=t.createEvent("HTMLEvents"),n.initEvent(e,!0,!0)):(n=t.createEventObject(),n.eventType=e),n.eventName=e,this._events[e]=n,n},fireEvent:function(e,n){var i=this._events[n]||this.createEvent(n);t.createEvent?e.dispatchEvent(i):e.fireEvent("on"+i.eventType,i)},paint:function(t){return t.offsetHeight}},i=function(t){this.input=t,this.value=parseFloat(t.value),this.max=parseFloat(t.getAttribute("max"))||100,this.min=parseFloat(t.getAttribute("min"))||0,this.step=parseFloat(t.getAttribute("step"))||1,this.mouseDown=!1};i.prototype={init:function(){return this._render(),this._bindEvents(),this._setValue(this.value),this.input.getAttribute("list")&&this._generateTicks(),this},_render:function(){var t=this.input;this.el=this._template(),t.style.display="none",t.parentNode.insertBefore(this.el,t.nextSibling),this._getDimensions()},_generateTicks:function(){var e=t.createElement("div");e.className="ticks";for(var n,i=(this.max-this.min)/this.step,s=100/i,a=0;i>a;a++)n=s*a,e.appendChild(this._generateTick(n));this.el.appendChild(e)},_generateTick:function(e){var n=t.createElement("div");return n.className="tick",n.style.position="absolute",n.style.left=[e,"%"].join(""),n},_getDimensions:function(){n.paint(this.pointer),this.pointerWidth=this.pointer.offsetWidth;var t=this.el.getBoundingClientRect();this.xMin=t.left,this.xMax=t.right-this.xMin},_template:function(){var t=this._rangeEl();return this.track=this._trackEl(),this.pointer=this._pointerEl(),t.appendChild(this.track),t.appendChild(this.pointer),t},_rangeEl:function(){var e=t.createElement("div");return e.className="range-replacement",e.style.position="relative",e},_trackEl:function(){var e=t.createElement("div");return e.className="track",e},_pointerEl:function(){var e=t.createElement("div");return e.className="point",e.style.position="absolute",e},_bindEvents:function(){var t=this;this.el.addEventListener("mousedown",function(e){t._onMouseDown(e)}),this.el.addEventListener("mouseup",function(e){t._onMouseUp(e)}),e.addEventListener("resize",function(e){t.update(e)})},update:function(){this._getDimensions(),this._setValue(this.value)},_onMouseDown:function(t){this.oldValue=this.value,this._input(t);var i=this,s=function(t){i._input(t)},a=function(){i._change(),e.removeEventListener("mousemove",s),e.removeEventListener("mouseup",a)};e.addEventListener("mousemove",s),e.addEventListener("mouseup",a),n.fireEvent(this.input,"mousedown")},_onMouseUp:function(){this._change(),n.fireEvent(this.input,"mouseup"),n.fireEvent(this.input,"click")},_getMouseX:function(){var t;return t="undefined"==typeof e.event?function(t){return t.pageX}:function(){return e.event.clientX}}(),_input:function(t){this.update();var e=this._getMouseX(t),i=e-this.xMin,s=[0,this.xMax],a=[this.min,this.max],r=this._scale(i,s,a),u=parseFloat(this._limitToRange(r));this._setValue(u),n.fireEvent(this.input,"input")},_setValue:function(t){var e=this._limitToRange(this._round(t));this.input.value=this.newValue=e;var n=this.pointerWidth/2,i=[this.min,this.max],s=[0,this.xMax],a=this._scale(e,i,s)||0;this.pointer.style.left=[parseInt(a-n,10),"px"].join("")},_change:function(){var t=this.newValue,e=this.input;this.oldValue!==t&&(this.value=t,e.value=this.oldValue=this.value,n.fireEvent(e,"change"))},_limitToRange:function(t){return Math.min(Math.max(t,this.min),this.max)},_scale:function(t,e,n){var i=e[0],s=n[0],a=n[1],r=(t-i)/(e[1]-i);return r*(a-s)+s},_round:function(t){return Math.round(t/this.step)*this.step}},i["new"]=function(t){return new i(t).init()},i.init=function(e){e=e||"input[type=range]";for(var n=t.querySelectorAll(e),i=[],s=0,a=n.length;a>s;s++)i.push(this["new"](n[s]));return i};var s=e.define||null;"function"==typeof s&&s.amd?s("range",[],function(){return i}):e.Range=i}(document,window);
