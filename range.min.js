!function(t,e){"use strict";var i={_events:{},createEvent:function(e){var i;return t.createEvent?(i=t.createEvent("HTMLEvents"),i.initEvent(e,!0,!0)):(i=t.createEventObject(),i.eventType=e),i.eventName=e,this._events[e]=i,i},fireEvent:function(e,i){var n=this._events[i]||this.createEvent(i);t.createEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n)},paint:function(t){return t.offsetHeight}},n=function(t){this.input=t,this.value=parseFloat(t.value),this.max=parseFloat(t.getAttribute("max"))||100,this.min=parseFloat(t.getAttribute("min"))||0,this.step=parseFloat(t.getAttribute("step"))||1,this.mouseDown=!1};n.prototype={init:function(){return this._render(),this._bindEvents(),this._setValue(this.value),this.input.getAttribute("list")&&this._generateTicks(),this},_render:function(){var t=this.input;t.style.display="none",t.parentNode.insertBefore(this._template(),t.nextSibling),this._getDimensions()},_generateTicks:function(){var e=t.createElement("div");e.className="ticks";for(var i=(this.max-this.min)/this.step,n=100/i,s=0;i>s;s++){var o=t.createElement("div"),r=n*s;o.className="tick",o.style.position="absolute",o.style.left=[r,"%"].join(""),e.appendChild(o)}this.el.appendChild(e)},_getDimensions:function(){i.paint(this.pointer),this.pointerWidth=this.pointer.offsetWidth;var t=this.el.getBoundingClientRect();this.xMin=t.left,this.xMax=t.right-this.xMin},_template:function(){return this.el=t.createElement("div"),this.el.className="range-replacement",this.el.style.position="relative",this.pointer=t.createElement("div"),this.pointer.className="point",this.pointer.style.position="absolute",this.el.appendChild(this.pointer),this.el},_bindEvents:function(){var t=this;this.el.addEventListener("mousedown",function(e){t._onMouseDown(e)}),this.el.addEventListener("mouseup",function(e){t._onMouseUp(e)}),e.addEventListener("resize",function(e){t._onResize(e)})},_onResize:function(){this._getDimensions(),this._setValue(this.value)},_onMouseDown:function(t){this.oldValue=this.value,this._input(t);var n=this,s=function(t){n._input(t)},o=function(){n._change(),e.removeEventListener("mousemove",s),e.removeEventListener("mouseup",o)};e.addEventListener("mousemove",s),e.addEventListener("mouseup",o),i.fireEvent(this.input,"mousedown")},_onMouseUp:function(){this._change(),i.fireEvent(this.input,"mouseup"),i.fireEvent(this.input,"click")},_getMouseX:function(){var t;return t="undefined"==typeof e.event?function(t){return t.pageX}:function(){return e.event.clientX}}(),_input:function(t){var e=this._getMouseX(t),n=e-this.xMin,s=[0,this.xMax-this.pointerWidth],o=[this.min,this.max],r=parseFloat(this._scale(n,s,o));this._setValue(r),i.fireEvent(this.input,"input")},_setValue:function(t){var e=this._round(t),i=this._limitToRange(e);this.newValue=i,this.input.value=this.newValue;var n=.5*this.pointerWidth,s=this.xMax-this.pointerWidth,o=[this.min,this.max],r=[0-n,s+n],u=this._scale(i,o,r)||0;this.pointer.style.left=[parseInt(u,10),"px"].join("")},_change:function(){this.oldValue!==this.newValue&&(this.value=this.newValue,this.input.value=this.oldValue=this.value,i.fireEvent(this.input,"change"))},_limitToRange:function(t){return this._limit(t,this.max,this.min)},_limit:function(t,e,i){return Math.min(Math.max(t,i),e)},_scale:function(t,e,i){var n=e[0],s=e[1],o=i[0],r=i[1],u=(t-n)/(s-n);return u*(r-o)+o},_round:function(t){return Math.round(t/this.step)*this.step}};var s={"new":function(t){return new n(t).init()},init:function(e){e=e||"input[type=range]";for(var i=t.querySelectorAll(e),n=[],s=0,o=i.length;o>s;s++)n.push(this["new"](i[s]));return n}},o=e.define||null;"function"==typeof o&&o.amd?o("range",[],function(){return s}):e.Range=s}(document,window);
