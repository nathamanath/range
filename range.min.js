(function(){"use strict";!function(t){var e=window.define||null;"function"==typeof e&&e.amd?e("range",[],function(){return t}):window.Range=t}(function(t,e){var i={_events:{},createEvent:function(e){var i;return t.createEvent?(i=t.createEvent("HTMLEvents"),i.initEvent(e,!0,!0)):(i=t.createEventObject(),i.eventType=e),i.eventName=e,this._events[e]=i,i},fireEvent:function(e,i){var n=this._events[i]||this.createEvent(i);t.createEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n)}},n=function(t){this.input=t,this.value=parseFloat(t.value),this.max=parseFloat(t.getAttribute("max"))||100,this.min=parseFloat(t.getAttribute("min"))||0,this.step=parseFloat(t.getAttribute("step"))||1};return n.prototype={init:function(){return this._render(),this._bindEvents(),this._setValue(this.value),this._list(),this},_list:function(){if(this.input.getAttribute("list")){this._generateTicks();var t=this.pointerWidth,e=t/2;this.ticks.style.padding=["0",e,"px"].join(""),this.ticks.style.width="100%",this.ticks.style.position="absolute"}},_render:function(){var t=this.input;this.el=this._template(),t.style.display="none",t.parentNode.insertBefore(this.el,t.nextSibling),this._getDimensions(),this.track.style.paddingRight=[this.pointerWidth,"px"].join("")},_generateTicks:function(){var e=t.createElement("div"),i=this._generateTicksInner();e.appendChild(i),e.className="ticks",this._generateTickEls(i),this.ticks=e,this.el.appendChild(this.ticks)},_generateTicksInner:function(){var e=t.createElement("div");return e.className="ticks-inner",e.style.width="100%",e.style.position="relative",e},_generateTickEls:function(t){for(var e,i=(this.max-this.min)/this.step,n=100/i,s=0;i>=s;s++)e=n*s,t.appendChild(this._generateTick(e))},_generateTick:function(e){var i=t.createElement("div");return i.className="tick",i.style.position="absolute",i.style.left=[e,"%"].join(""),i},_getDimensions:function(){this.pointerWidth=this.pointer.offsetWidth;var t=this.el.getBoundingClientRect();this.xMin=t.left,this.xMax=t.right-this.xMin},_template:function(){var t=this._rangeEl();return this.track=this._trackEl(),this.pointer=this._pointerEl(),t.appendChild(this.track),this.track.appendChild(this.pointer),t},_rangeEl:function(){var e=t.createElement("div"),i=this.pointerWidth||0;return e.className="range-replacement",e.style.position="relative",e.style.paddingRight=[i,"px"].join(""),e},_trackEl:function(){var e=t.createElement("div");return e.className="track",e},_pointerEl:function(){var e=t.createElement("div");return e.className="point",e.style.position="relative",e},_bindEvents:function(){var t=this;this.el.addEventListener("mousedown",function(e){t._onMouseDown(e)}),this.el.addEventListener("mouseup",function(e){t._onMouseUp(e)})},update:function(){this.value=parseFloat(this.input.value),this._getDimensions(),this._setValue(this.value)},_onMouseDown:function(t){this.oldValue=this.value,this._input(t);var n=this,s=function(t){n._input(t)},a=function(){n._change(),e.removeEventListener("mousemove",s),e.removeEventListener("mouseup",a)};e.addEventListener("mousemove",s),e.addEventListener("mouseup",a),i.fireEvent(this.input,"mousedown")},_onMouseUp:function(){this._change(),i.fireEvent(this.input,"mouseup"),i.fireEvent(this.input,"click")},_getMouseX:function(){var t;return t="undefined"==typeof e.event?function(t){return t.pageX}:function(){return e.event.clientX}}(),_input:function(t){this.update();var e=this._getMouseX(t),n=e-this.xMin,s=[0,this.xMax],a=[this.min,this.max],r=this._scale(n,s,a),u=parseFloat(this._limitToRange(r));this._setValue(u),i.fireEvent(this.input,"input")},_setValue:function(t){var e=this._limitToRange(this._round(t));if(e!==this.oldInputValue){this.oldInputValue=this.value,this.input.value=this.newValue=e;var i=e/this.max*100||0;this.pointer.style.left=[i,"%"].join("")}},_change:function(){var t=this.newValue,e=this.input;this.oldValue!==t&&(this.value=t,e.value=this.oldValue=this.value,i.fireEvent(e,"change"))},_limitToRange:function(t){return Math.min(Math.max(t,this.min),this.max)},_scale:function(t,e,i){var n=e[0],s=i[0],a=i[1],r=(t-n)/(e[1]-n);return r*(a-s)+s},_round:function(t){return Math.round(t/this.step)*this.step}},n["new"]=function(t){return new n(t).init()},n.init=function(e){e=e||"input[type=range]";for(var i=t.querySelectorAll(e),n=[],s=0,a=i.length;a>s;s++)n.push(this["new"](i[s]));return n},n}(document,window))}).call(window);
